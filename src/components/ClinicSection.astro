---
import { Image } from 'astro:assets';
import SectionHeading from './SectionHeading.astro';
import clinicVideoThumb from '../assets/images/clinic-video.jpg';

interface Props {
	background?: 'white' | 'blue-white';
}

const { background = 'white' } = Astro.props;
const bgClass = background === 'blue-white' ? 'bg-blue-white' : 'bg-white';

---

<section class:list={[bgClass, 'py-24 w-full']}>
	<div class="container-site flex flex-col lg:flex-row items-center gap-8 lg:gap-20">

		<!-- Text content — first on mobile -->
		<div class="flex-1 min-w-0 w-full order-1 lg:order-2 flex flex-col items-center lg:items-start">
			<SectionHeading
				label="Sobre nosotros"
				title="Conoce la clínica"
				description="Nuestra clínica cuenta con 40 años de experiencia atendiendo a familias de El Bosque y sus alrededores. Disponemos de infraestructura completa, desde scanner 3D hasta laboratorio de patología oral propio."
				centerOnMobile
			/>
		</div>

		<!-- Video thumbnail — overlay with "Reproducir video" label that follows cursor -->
		<div class="video-overlay-wrapper relative rounded-2xl overflow-hidden shrink-0 w-full max-w-full lg:w-[480px] h-56 lg:h-80 order-2 lg:order-1 cursor-pointer hover:cursor-none">
			<!-- Decorative background -->
			<div class="absolute inset-0" aria-hidden="true">
				<Image
					src={clinicVideoThumb}
					alt=""
					class="w-full h-full object-cover opacity-80"
				/>
				<div class="absolute inset-0 bg-black/40" />
			</div>
			<!-- Label — centered by default, follows cursor on hover -->
			<span
				class="video-overlay-label absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none z-10 text-sm font-semibold text-white whitespace-nowrap drop-shadow-[0_1px_2px_rgba(0,0,0,0.5)]"
				aria-hidden="true"
			>
				▶ Reproducir video
			</span>
		</div>

	</div>
</section>

<script>
	document.querySelectorAll('.video-overlay-wrapper').forEach((wrapper) => {
		const label = wrapper.querySelector('.video-overlay-label');
		if (!label) return;

		wrapper.addEventListener('mouseenter', () => {
			wrapper.classList.add('is-hovering');
			label.classList.add('fixed', '-translate-x-1/2', '-translate-y-1/2');
			label.classList.remove('absolute', 'left-1/2', 'top-1/2');
		});

		wrapper.addEventListener('mouseleave', () => {
			wrapper.classList.remove('is-hovering');
			label.classList.remove('fixed');
			label.classList.add('absolute', 'left-1/2', 'top-1/2', '-translate-x-1/2', '-translate-y-1/2');
			label.style.left = '';
			label.style.top = '';
		});

		wrapper.addEventListener('mousemove', (e: MouseEvent) => {
			if (wrapper.classList.contains('is-hovering')) {
				label.style.left = `${e.clientX}px`;
				label.style.top = `${e.clientY}px`;
			}
		});
	});
</script>
