---
import { Image } from 'astro:assets';
import { config } from '../config';
import Button from './Button.astro';
import logo from '../assets/images/logo-transparent.png';
import { specialties } from '../data/specialties';

type NavLink =
	| { href: string; label: string; hasDropdown: false }
	| { label: string; hasDropdown: true };

const navLinks: NavLink[] = [
	{ href: '/', label: 'Inicio', hasDropdown: false },
	{ label: 'Especialidades', hasDropdown: true },
	{ href: '/quienes-somos', label: 'Conoce la Clínica', hasDropdown: false },
	{ href: '/contacto', label: 'Contacto', hasDropdown: false },
];

const pathname = Astro.url.pathname.replace(/\/$/, '') || '/';
const isActive = (href: string) => {
	if (href === '/') return pathname === '/';
	return pathname === href || pathname.startsWith(href + '/');
};
const isSpecialtiesActive = pathname.startsWith('/especialidades');
---

<header class="bg-blue-white py-5 w-full relative z-50 overflow-visible">
		<div class="container-site flex items-center justify-between overflow-visible">

		<div class="flex gap-8 lg:gap-20 items-center">
			<a href="/" class="h-14 w-32 shrink-0 block" aria-label="Dental Gran Avenida - Inicio">
				<Image src={logo} alt="Dental Gran Avenida" class="h-full w-auto object-contain object-left" loading="eager" />
			</a>

			<nav class="hidden md:flex gap-6 lg:gap-10 items-center" aria-label="Navegación principal">
				{navLinks.map((link) => (
					link.hasDropdown ? (
						<div class="relative group" id="nav-specialties">
							<button
								type="button"
								class:list={[
									'flex gap-1.5 items-center text-base transition-colors whitespace-nowrap py-2 bg-transparent border-none cursor-pointer font-inherit',
									isSpecialtiesActive
										? 'text-french-ultramarine underline decoration-dashed decoration-french-ultramarine/30 underline-offset-8'
										: 'text-black font-normal hover:text-french-ultramarine',
								]}
								aria-haspopup="true"
								aria-expanded="false"
								aria-label="Especialidades, desplegar menú"
							>
								{link.label}
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 5" class="w-[9px] h-[5px] shrink-0 fill-current transition-transform group-hover:rotate-180" aria-hidden="true">
									<path d="M0.5 0.5L4.5 4.5L8.5 0.5" stroke="currentColor" stroke-width="1.2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
							</button>
							<div
								class="absolute left-0 top-full pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-[opacity,visibility] duration-200"
								role="menu"
								aria-label="Especialidades"
							>
								<ul class="bg-white rounded-xl shadow-lg border border-navy-blue/10 py-2 min-w-72">
									{specialties.map((s) => (
										<li role="none">
											<a
												href={`/especialidades/${s.slug}`}
												class:list={[
													'flex items-center gap-2 px-4 py-2.5 text-base transition-colors',
													pathname === `/especialidades/${s.slug}` ? 'text-french-ultramarine bg-blue-white' : 'text-body hover:bg-blue-white hover:text-french-ultramarine',
												]}
												role="menuitem"
												aria-label={`Ir a ${s.label}`}
											>
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400.141 400.141" class="size-4 shrink-0 fill-current" aria-hidden="true">
													<title>{s.label}</title>
													<path d="M344.879,30.971C327.039,11,302.484,0,275.737,0c-20.946,0-43.379,12.377-59.76,21.414 c-5.425,2.992-13.523,7.894-15.911,7.895c-2.377,0.001-10.438-4.889-15.84-7.879C167.88,12.387,145.494,0,124.401,0 C97.654,0,73.099,11,55.26,30.971C38.308,49.951,28.972,74.93,28.972,101.303c0,16.988,3.122,36.946,8.017,59.606 c4.605,21.32,19.205,39.269,50.061,52.85c9.321,4.104,26.044,7.305,29.044,10.305c3.605,3.605,7.458,16.625,7.458,16.625 s0.875,3.068-0.412,3.068c-7.122,0-12.916,5.795-12.916,12.916s5.794,12.916,12.916,12.916c0,0,6.215,0,8.287,0 c1.625,0,2.154,1.67,2.154,1.67l4.472,13.805c0,0,0.375,2.533-2.6,2.533c-7.121,0-12.914,5.793-12.914,12.914 s5.793,12.916,12.914,12.916c0,0,7.669,0,10.225,0c1.875,0,2.501,1.512,2.501,1.512l5.201,15.561c0,0,0.298,0.936-0.827,0.936 c-1.17,0-4.682,0-4.682,0c-7.123,0-12.916,5.795-12.916,12.916c0,7.123,5.793,12.916,12.916,12.916c0,0,9.668,0,12.891,0 c1.75,0,2.022,1.373,2.022,1.373l7.974,23.855l0.047,0.125c4.757,11.623,14.385,17.52,28.617,17.52h0.791 c14.231,0,23.858-5.896,28.649-17.605c0,0,5.98-18.223,8.19-24.219c0.438-1.189,1.25-1.049,1.25-1.049h13.966 c7.121,0,12.915-5.793,12.915-12.916c0-7.121-3.506-12.916-12.915-12.916c-1.981,0-3.93,0.006-4.778,0.006 c-1.313,0-0.5-2.25-0.5-2.25l4.75-14.313c0,0,0.25-1.449,1.626-1.449c2.829,0,11.318,0,11.318,0 c7.121,0,12.915-5.795,12.915-12.916c0-7.12-5.176-12.913-12.297-12.913c-1.515,0-2.042,0.049-2.625,0.049 c-1.562,0-0.688-1.771-0.688-1.771s3.381-11.144,4.812-15.438c0.313-0.938,1.313-0.85,1.313-0.85h8.882 c7.121,0,12.914-5.795,12.914-12.916s-5.793-12.916-12.914-12.916c-1.132,0-0.92-1.494-0.736-2.234 c1.167-4.709,3.348-14.395,7.5-17.459c3.922-2.895,19.721-6.291,28.842-10.305c30.191-13.291,45.991-33.361,49.961-51.629 c5.019-23.091,8.604-43.98,8.604-60.828C371.168,74.93,361.832,49.954,344.879,30.971z M213.749,376.484 c-2.825,6.844-11.379,7.375-13.932,7.375c-2.548,0-11.065-0.529-13.913-7.324l-6.142-18.416c0,0-0.147-0.854,1.041-0.854 c9.864,0,29.086,0,38.78,0c0.688,0,0.541,0.396,0.541,0.396L213.749,376.484z M228.573,331.434c-14.224,0-42.562,0-56.896,0 c-0.875,0-1.063-0.869-1.063-0.869l-5.535-16.475c0,0-0.09-0.662,1.035-0.662c17.249,0,51.266,0,68.354,0 c0.646,0,0.48,0.477,0.48,0.477l-5.839,17.229C229.112,331.133,228.948,331.434,228.573,331.434z M244.136,286.982 c0,0-0.146,0.615-0.792,0.615c-6.161,0-65.66,0-86.208,0c-0.917,0-1.125-0.574-1.125-0.574l-5.42-16.388 c0,0-0.351-1.071,1.024-1.071c26.875,0,73.109,0.025,97.479,0.025c0.875,0,0.64,0.676,0.64,0.676L244.136,286.982z M256.928,243.753c-28.567,0-113.958-0.063-113.958-0.063s-0.875,0-1.292-0.875c-1.202-2.522-3.542-8.791-4.489-12.369 c-0.525-1.983,1.364-1.381,1.364-1.381c19.971,3.822,39.268,5.351,61.273,5.351c22.32,0,42.439-1.672,62.644-5.601 c0,0,1.417-0.25,1.087,0.653c-1.098,3.009-3.308,9.647-4.316,12.7C258.915,243.148,257.928,243.753,256.928,243.753z M348.261,157.066c-0.691,3.012-2.895,8.507-4.036,11.595c-4.261,11.532-18.773,21.91-38.087,30.414 c-9.916,4.365-21.131,8.088-33.332,11.064l-2.128,0.514c-21.528,5.049-46.028,7.717-70.853,7.717 c-24.134,0-48.009-2.529-69.107-7.318l-2.075-0.477c-12.884-3.041-24.7-6.908-35.129-11.498 c-18.93-8.334-34.325-19.907-38.899-31.041c-1.469-3.577-3.938-12.219-3.938-12.219c-4.931-21.021-5.661-39.273-5.661-54.512 c0-41.91,29.694-85.258,79.384-85.258c12.896,0,29.882,5.902,45.442,15.789c2.272,1.445,5.513,3.936,8.646,6.346 c1.245,0.957,2.473,1.9,3.618,2.764c3.715,2.779,8.735,6.418,14.615,9.879c3.093,1.826,5.907,3.445,9.021,4.768 c12.738,5.406,26.244,8.148,40.142,8.148c14.181,0,31.599-3.445,31.359-5.414c-0.24-1.969-29.273-1.969-48.604-7.09 c-7.717-2.043-16.462-5.355-16.462-7.17c0-1.935,2.729-3.453,4.871-4.732c1.868-1.117,3.987-2.383,6.688-3.873 c14.851-8.193,35.188-19.414,52-19.414c49.69,0,79.384,43.348,79.384,85.258C355.121,116.336,353.147,135.788,348.261,157.066z"/>
												</svg>
												{s.label}
											</a>
										</li>
									))}
								</ul>
							</div>
						</div>
					) : (
						<a
							href={link.href}
							class:list={[
								'flex gap-1.5 items-center text-base transition-colors whitespace-nowrap',
								isActive(link.href)
									? 'text-french-ultramarine underline decoration-dashed decoration-french-ultramarine/30 underline-offset-8'
									: 'text-black font-normal hover:text-french-ultramarine',
							]}
							aria-current={isActive(link.href) ? 'page' : undefined}
						>
							{link.label}
						</a>
					)
				))}
			</nav>
		</div>

		<div class="hidden md:flex gap-3 items-center">
			<a
				href={`tel:+${config.whatsapp.phone}`}
				class="size-12 shrink-0 flex items-center justify-center rounded-full border border-french-ultramarine hover:bg-french-ultramarine group transition-colors"
				aria-label="Llamar"
			>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="size-5 stroke-french-ultramarine group-hover:stroke-white fill-none transition-colors" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
					<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 12 19.79 19.79 0 0 1 1.62 3.4 2 2 0 0 1 3.6 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L7.91 9.6a16 16 0 0 0 6.29 6.29l.96-.96a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92Z"/>
				</svg>
			</a>
			<Button href={config.whatsapp.url} label="Agendar hora" variant="primary" target="_blank" />
		</div>

		<button
			type="button"
			id="menu-toggle"
			class="md:hidden flex flex-col items-center justify-center gap-1.5 size-12 min-w-12 -mr-2 rounded-lg hover:bg-navy-blue/5 transition-colors touch-manipulation overflow-visible [&.is-open_span:nth-child(1)]:rotate-45 [&.is-open_span:nth-child(1)]:translate-y-2 [&.is-open_span:nth-child(2)]:opacity-0 [&.is-open_span:nth-child(3)]:-rotate-45 [&.is-open_span:nth-child(3)]:-translate-y-2"
			aria-label="Abrir menú"
			aria-expanded="false"
			aria-controls="mobile-menu"
		>
			<span class="block w-5 h-0.5 bg-navy-blue rounded-full transition-transform duration-300 origin-center" aria-hidden="true"></span>
			<span class="block w-5 h-0.5 bg-navy-blue rounded-full transition-all duration-300 origin-center" aria-hidden="true"></span>
			<span class="block w-5 h-0.5 bg-navy-blue rounded-full transition-transform duration-300 origin-center" aria-hidden="true"></span>
		</button>

	</div>
</header>

<div
	id="mobile-menu"
	class="fixed inset-0 z-40 md:hidden bg-blue-white invisible opacity-0 pointer-events-none transition-[visibility,opacity] duration-300 ease-out [&.is-open]:visible [&.is-open]:opacity-100 [&.is-open]:pointer-events-auto overflow-x-hidden"
	aria-hidden="true"
>
	<div class="flex flex-col h-full overflow-hidden min-w-0 pt-24 w-full max-w-full">
		<nav class="flex-1 flex flex-col justify-center container-site py-8 min-w-0 w-full" aria-label="Navegación móvil">
			<ul class="flex flex-col w-full min-w-0">
				{navLinks.map((link) => (
					link.hasDropdown ? (
						<li class="border-b border-navy-blue/10">
							<button
								type="button"
								id="mobile-specialties-toggle"
								class="flex w-full items-center justify-between py-4 text-lg text-left transition-colors"
								aria-expanded="false"
								aria-controls="mobile-specialties-list"
								aria-label="Especialidades, expandir menú"
							>
								<span class:list={[
									isSpecialtiesActive ? 'text-french-ultramarine' : 'text-black font-normal',
								]}>
									{link.label}
								</span>
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 5" class="w-[9px] h-[5px] shrink-0 fill-current transition-transform duration-200" aria-hidden="true">
									<path d="M0.5 0.5L4.5 4.5L8.5 0.5" stroke="currentColor" stroke-width="1.2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
							</button>
							<ul id="mobile-specialties-list" class="hidden flex-col pb-2" aria-hidden="true" aria-label="Lista de especialidades">
								{specialties.map((s) => (
									<li>
										<a
											href={`/especialidades/${s.slug}`}
											class:list={[
												'flex items-center gap-2 py-3 pl-4 text-base transition-colors border-l-2 -ml-px',
												pathname === `/especialidades/${s.slug}` ? 'text-french-ultramarine border-french-ultramarine' : 'text-body border-transparent hover:text-french-ultramarine hover:border-french-ultramarine',
											]}
											aria-current={pathname === `/especialidades/${s.slug}` ? 'page' : undefined}
											aria-label={`Ir a ${s.label}`}
										>
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400.141 400.141" class="size-4 shrink-0 fill-current" aria-hidden="true">
												<title>{s.label}</title>
												<path d="M344.879,30.971C327.039,11,302.484,0,275.737,0c-20.946,0-43.379,12.377-59.76,21.414 c-5.425,2.992-13.523,7.894-15.911,7.895c-2.377,0.001-10.438-4.889-15.84-7.879C167.88,12.387,145.494,0,124.401,0 C97.654,0,73.099,11,55.26,30.971C38.308,49.951,28.972,74.93,28.972,101.303c0,16.988,3.122,36.946,8.017,59.606 c4.605,21.32,19.205,39.269,50.061,52.85c9.321,4.104,26.044,7.305,29.044,10.305c3.605,3.605,7.458,16.625,7.458,16.625 s0.875,3.068-0.412,3.068c-7.122,0-12.916,5.795-12.916,12.916s5.794,12.916,12.916,12.916c0,0,6.215,0,8.287,0 c1.625,0,2.154,1.67,2.154,1.67l4.472,13.805c0,0,0.375,2.533-2.6,2.533c-7.121,0-12.914,5.793-12.914,12.914 s5.793,12.916,12.914,12.916c0,0,7.669,0,10.225,0c1.875,0,2.501,1.512,2.501,1.512l5.201,15.561c0,0,0.298,0.936-0.827,0.936 c-1.17,0-4.682,0-4.682,0c-7.123,0-12.916,5.795-12.916,12.916c0,7.123,5.793,12.916,12.916,12.916c0,0,9.668,0,12.891,0 c1.75,0,2.022,1.373,2.022,1.373l7.974,23.855l0.047,0.125c4.757,11.623,14.385,17.52,28.617,17.52h0.791 c14.231,0,23.858-5.896,28.649-17.605c0,0,5.98-18.223,8.19-24.219c0.438-1.189,1.25-1.049,1.25-1.049h13.966 c7.121,0,12.915-5.793,12.915-12.916c0-7.121-3.506-12.916-12.915-12.916c-1.981,0-3.93,0.006-4.778,0.006 c-1.313,0-0.5-2.25-0.5-2.25l4.75-14.313c0,0,0.25-1.449,1.626-1.449c2.829,0,11.318,0,11.318,0 c7.121,0,12.915-5.795,12.915-12.916c0-7.12-5.176-12.913-12.297-12.913c-1.515,0-2.042,0.049-2.625,0.049 c-1.562,0-0.688-1.771-0.688-1.771s3.381-11.144,4.812-15.438c0.313-0.938,1.313-0.85,1.313-0.85h8.882 c7.121,0,12.914-5.795,12.914-12.916s-5.793-12.916-12.914-12.916c-1.132,0-0.92-1.494-0.736-2.234 c1.167-4.709,3.348-14.395,7.5-17.459c3.922-2.895,19.721-6.291,28.842-10.305c30.191-13.291,45.991-33.361,49.961-51.629 c5.019-23.091,8.604-43.98,8.604-60.828C371.168,74.93,361.832,49.954,344.879,30.971z M213.749,376.484 c-2.825,6.844-11.379,7.375-13.932,7.375c-2.548,0-11.065-0.529-13.913-7.324l-6.142-18.416c0,0-0.147-0.854,1.041-0.854 c9.864,0,29.086,0,38.78,0c0.688,0,0.541,0.396,0.541,0.396L213.749,376.484z M228.573,331.434c-14.224,0-42.562,0-56.896,0 c-0.875,0-1.063-0.869-1.063-0.869l-5.535-16.475c0,0-0.09-0.662,1.035-0.662c17.249,0,51.266,0,68.354,0 c0.646,0,0.48,0.477,0.48,0.477l-5.839,17.229C229.112,331.133,228.948,331.434,228.573,331.434z M244.136,286.982 c0,0-0.146,0.615-0.792,0.615c-6.161,0-65.66,0-86.208,0c-0.917,0-1.125-0.574-1.125-0.574l-5.42-16.388 c0,0-0.351-1.071,1.024-1.071c26.875,0,73.109,0.025,97.479,0.025c0.875,0,0.64,0.676,0.64,0.676L244.136,286.982z M256.928,243.753c-28.567,0-113.958-0.063-113.958-0.063s-0.875,0-1.292-0.875c-1.202-2.522-3.542-8.791-4.489-12.369 c-0.525-1.983,1.364-1.381,1.364-1.381c19.971,3.822,39.268,5.351,61.273,5.351c22.32,0,42.439-1.672,62.644-5.601 c0,0,1.417-0.25,1.087,0.653c-1.098,3.009-3.308,9.647-4.316,12.7C258.915,243.148,257.928,243.753,256.928,243.753z M348.261,157.066c-0.691,3.012-2.895,8.507-4.036,11.595c-4.261,11.532-18.773,21.91-38.087,30.414 c-9.916,4.365-21.131,8.088-33.332,11.064l-2.128,0.514c-21.528,5.049-46.028,7.717-70.853,7.717 c-24.134,0-48.009-2.529-69.107-7.318l-2.075-0.477c-12.884-3.041-24.7-6.908-35.129-11.498 c-18.93-8.334-34.325-19.907-38.899-31.041c-1.469-3.577-3.938-12.219-3.938-12.219c-4.931-21.021-5.661-39.273-5.661-54.512 c0-41.91,29.694-85.258,79.384-85.258c12.896,0,29.882,5.902,45.442,15.789c2.272,1.445,5.513,3.936,8.646,6.346 c1.245,0.957,2.473,1.9,3.618,2.764c3.715,2.779,8.735,6.418,14.615,9.879c3.093,1.826,5.907,3.445,9.021,4.768 c12.738,5.406,26.244,8.148,40.142,8.148c14.181,0,31.599-3.445,31.359-5.414c-0.24-1.969-29.273-1.969-48.604-7.09 c-7.717-2.043-16.462-5.355-16.462-7.17c0-1.935,2.729-3.453,4.871-4.732c1.868-1.117,3.987-2.383,6.688-3.873 c14.851-8.193,35.188-19.414,52-19.414c49.69,0,79.384,43.348,79.384,85.258C355.121,116.336,353.147,135.788,348.261,157.066z"/>
											</svg>
											{s.label}
										</a>
									</li>
								))}
							</ul>
						</li>
					) : (
						<li>
							<a
								href={link.href}
								class:list={[
									'block py-4 text-lg transition-colors border-b border-navy-blue/10',
									isActive(link.href)
										? 'text-french-ultramarine underline-dash'
										: 'text-black font-normal hover:text-french-ultramarine',
								]}
								aria-current={isActive(link.href) ? 'page' : undefined}
							>
								{link.label}
							</a>
						</li>
					)
				))}
			</ul>
		</nav>

		<div class="container-site shrink-0 flex gap-3 items-center justify-center py-6">
			<a
				href={config.social.facebook}
				target="_blank"
				rel="noopener noreferrer"
				class="bg-dark-sea-blue flex items-center justify-center size-10 rounded-full p-2 shrink-0 hover:opacity-80 transition-opacity"
				aria-label="Facebook"
			>
				<svg width="8" height="16" viewBox="0 0 8 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="fill-blue-white" aria-hidden="true">
					<path d="M4.75625 3.425C4.75625 2.78125 5.33125 2.55 5.975 2.55C6.61875 2.55 7.30625 2.75 7.30625 2.75L7.71875 0.299999C7.71875 0.299999 6.84375 0 4.75625 0C3.475 0 2.73125 0.487499 2.1875 1.20625C1.675 1.8875 1.65625 2.98125 1.65625 3.6875V5.29375H0V7.6875H1.65625V16H4.75625V7.6875H7.2125L7.39375 5.29375H4.75625V3.425Z"/>
				</svg>
			</a>
			<a
				href={config.social.instagram}
				target="_blank"
				rel="noopener noreferrer"
				class="bg-dark-sea-blue flex items-center justify-center size-10 rounded-full p-2 shrink-0 hover:opacity-80 transition-opacity"
				aria-label="Instagram"
			>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="size-4 fill-blue-white" aria-hidden="true">
					<path d="M8 1.441c2.136 0 2.389.008 3.232.047.78.035 1.204.166 1.486.275.373.145.64.318.92.598s.453.546.598.92c.11.282.24.705.275 1.486.038.843.047 1.096.047 3.232s-.009 2.389-.047 3.232c-.035.78-.166 1.204-.275 1.486a2.479 2.479 0 0 1-.598.92 2.479 2.479 0 0 1-.92.598c-.282.11-.705.24-1.486.275-.843.038-1.096.047-3.232.047s-2.389-.009-3.232-.047c-.78-.035-1.204-.166-1.486-.275a2.479 2.479 0 0 1-.92-.598 2.479 2.479 0 0 1-.598-.92c-.11-.282-.24-.705-.275-1.486C1.45 10.389 1.44 10.136 1.44 8s.008-2.389.047-3.232c.035-.78.166-1.204.275-1.486.145-.373.318-.64.598-.92s.546-.453.92-.598c.282-.11.705-.24 1.486-.275.843-.038 1.096-.047 3.232-.047ZM8 0C5.827 0 5.555.009 4.702.048 3.85.087 3.268.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.917 3.917 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.702.009 5.555 0 5.827 0 8c0 2.173.009 2.445.048 3.298.039.852.174 1.433.372 1.942.204.526.478.972.923 1.417.445.445.89.719 1.417.923.509.198 1.09.333 1.942.372C5.555 15.991 5.827 16 8 16c2.173 0 2.445-.009 3.298-.048.852-.039 1.433-.174 1.942-.372a3.916 3.916 0 0 0 1.417-.923 3.916 3.916 0 0 0 .923-1.417c.198-.509.333-1.09.372-1.942C15.991 10.445 16 10.173 16 8c0-2.173-.009-2.445-.048-3.298-.039-.852-.174-1.433-.372-1.942a3.916 3.916 0 0 0-.923-1.417A3.916 3.916 0 0 0 13.24.42C12.732.222 12.15.087 11.298.048 10.445.009 10.173 0 8 0Zm0 3.892a4.108 4.108 0 1 0 0 8.216 4.108 4.108 0 0 0 0-8.216ZM8 10.667A2.667 2.667 0 1 1 8 5.333a2.667 2.667 0 0 1 0 5.334ZM13.23 3.719a.96.96 0 1 1-1.92 0 .96.96 0 0 1 1.92 0Z"/>
				</svg>
			</a>
			<a
				href={config.whatsapp.url}
				target="_blank"
				rel="noopener noreferrer"
				class="bg-dark-sea-blue flex items-center justify-center size-10 rounded-full p-2 shrink-0 hover:opacity-80 transition-opacity"
				aria-label="WhatsApp"
			>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="size-4 fill-blue-white" aria-hidden="true">
					<path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.628 0 .07 3.558.07 7.924c0 1.396.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.367 0 7.925-3.558 7.925-7.924a7.88 7.88 0 0 0-2.322-5.613ZM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592Zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232Z"/>
				</svg>
			</a>
		</div>

		<div class="container-site shrink-0 flex gap-3 w-full pb-8 pt-2">
			<a
				href={`tel:+${config.whatsapp.phone}`}
				class="flex-1 min-w-0 flex items-center justify-center gap-2 h-12 rounded-full border border-french-ultramarine text-french-ultramarine hover:bg-french-ultramarine hover:text-white transition-colors touch-manipulation"
				aria-label="Llamar"
			>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="size-5 stroke-current fill-none shrink-0" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
					<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 12 19.79 19.79 0 0 1 1.62 3.4 2 2 0 0 1 3.6 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L7.91 9.6a16 16 0 0 0 6.29 6.29l.96-.96a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92Z"/>
				</svg>
				<span class="text-base font-normal">Llamar</span>
			</a>
			<a
				href={config.whatsapp.url}
				target="_blank"
				rel="noopener noreferrer"
				class="flex-1 min-w-0 flex items-center justify-center gap-2 h-12 rounded-full bg-french-ultramarine text-white hover:opacity-90 transition-opacity touch-manipulation [&:hover>svg]:translate-x-1"
			>
				<span class="text-base font-normal">Agendar hora</span>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 8" class="w-[18px] h-[8px] shrink-0 transition-transform duration-300" aria-hidden="true">
					<path d="M17.354 4.354a.5.5 0 0 0 0-.708L14.172.464a.5.5 0 1 0-.708.708L16.293 4l-2.829 2.828a.5.5 0 1 0 .708.708l3.182-3.182ZM0 4.5h17v-1H0v1Z" fill="currentColor"/>
				</svg>
			</a>
		</div>
	</div>
</div>

<script is:inline>
	document.addEventListener('DOMContentLoaded', function () {
		const toggle = document.getElementById('menu-toggle');
		const menu = document.getElementById('mobile-menu');

		function openMenu() {
			menu?.classList.add('is-open');
			toggle?.classList.add('is-open');
			menu?.setAttribute('aria-hidden', 'false');
			toggle?.setAttribute('aria-expanded', 'true');
			toggle?.setAttribute('aria-label', 'Cerrar menú');
			document.documentElement.style.overflow = 'hidden';
			document.body.style.overflow = 'hidden';
			document.body.style.touchAction = 'none';
		}

		function closeMenu() {
			menu?.classList.remove('is-open');
			toggle?.classList.remove('is-open');
			menu?.setAttribute('aria-hidden', 'true');
			toggle?.setAttribute('aria-expanded', 'false');
			toggle?.setAttribute('aria-label', 'Abrir menú');
			document.documentElement.style.overflow = '';
			document.body.style.overflow = '';
			document.body.style.touchAction = '';
		}

		toggle?.addEventListener('click', () => {
			if (menu?.classList.contains('is-open')) closeMenu();
			else openMenu();
		});

		document.addEventListener('keydown', (e) => {
			if (e.key === 'Escape' && menu?.classList.contains('is-open')) closeMenu();
		});

		document.querySelectorAll('#mobile-menu a[href]').forEach((link) => {
			link.addEventListener('click', () => closeMenu());
		});

		const specialtiesToggle = document.getElementById('mobile-specialties-toggle');
		const specialtiesList = document.getElementById('mobile-specialties-list');
		if (specialtiesToggle && specialtiesList) {
			specialtiesToggle.addEventListener('click', () => {
				const isExpanded = specialtiesToggle.getAttribute('aria-expanded') === 'true';
				specialtiesToggle.setAttribute('aria-expanded', String(!isExpanded));
				specialtiesList.classList.toggle('hidden', isExpanded);
				specialtiesList.classList.toggle('flex', !isExpanded);
				specialtiesList.setAttribute('aria-hidden', String(isExpanded));
				specialtiesToggle.querySelector('svg')?.classList.toggle('rotate-180', !isExpanded);
			});
		}
	});
</script>
